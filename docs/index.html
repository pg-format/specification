<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.553">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Property Graph Exchange Format (PG)</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script type="text/javascript" src="script.js"></script>


<link rel="stylesheet" href="style.css">
<meta name="citation_title" content="Property Graph Exchange Format (PG)">
<meta name="citation_language" content="en">
</head>

<body>

<header id="title-block-header" class="quarto-title-block default toc-left page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Property Graph Exchange Format (PG)</h1>
          </div>

    
    <div class="quarto-title-meta-container">
      <div class="quarto-title-meta-column-start">
        
        <div class="quarto-title-meta">

                
          
                
              </div>
      </div>
      <div class="quarto-title-meta-column-end quarto-other-formats-target">
      </div>
    </div>



    <div class="quarto-other-links-text-target">
    </div>  </div>
</header><div id="quarto-content" class="page-columns page-rows-contents page-layout-article toc-left">
<div id="quarto-sidebar-toc-left" class="sidebar toc-left">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction"><span class="header-section-number">1</span> Introduction</a>
  <ul class="collapse">
  <li><a href="#why-property-graphs" id="toc-why-property-graphs" class="nav-link" data-scroll-target="#why-property-graphs"><span class="header-section-number">1.1</span> Why property graphs?</a></li>
  <li><a href="#about-this-document" id="toc-about-this-document" class="nav-link" data-scroll-target="#about-this-document"><span class="header-section-number">1.2</span> About this document</a></li>
  </ul></li>
  <li><a href="#data-model" id="toc-data-model" class="nav-link" data-scroll-target="#data-model"><span class="header-section-number">2</span> Data Model</a></li>
  <li><a href="#pg-format" id="toc-pg-format" class="nav-link" data-scroll-target="#pg-format"><span class="header-section-number">3</span> PG format</a>
  <ul class="collapse">
  <li><a href="#basic-structure" id="toc-basic-structure" class="nav-link" data-scroll-target="#basic-structure"><span class="header-section-number">3.1</span> Basic structure</a></li>
  <li><a href="#identifiers" id="toc-identifiers" class="nav-link" data-scroll-target="#identifiers"><span class="header-section-number">3.2</span> Identifiers</a></li>
  <li><a href="#nodes" id="toc-nodes" class="nav-link" data-scroll-target="#nodes"><span class="header-section-number">3.3</span> Nodes</a></li>
  <li><a href="#edges" id="toc-edges" class="nav-link" data-scroll-target="#edges"><span class="header-section-number">3.4</span> Edges</a></li>
  <li><a href="#labels" id="toc-labels" class="nav-link" data-scroll-target="#labels"><span class="header-section-number">3.5</span> Labels</a></li>
  <li><a href="#properties" id="toc-properties" class="nav-link" data-scroll-target="#properties"><span class="header-section-number">3.6</span> Properties</a></li>
  <li><a href="#quoted-strings" id="toc-quoted-strings" class="nav-link" data-scroll-target="#quoted-strings"><span class="header-section-number">3.7</span> Quoted Strings</a></li>
  <li><a href="#whitespace" id="toc-whitespace" class="nav-link" data-scroll-target="#whitespace"><span class="header-section-number">3.8</span> Whitespace</a></li>
  <li><a href="#grammar" id="toc-grammar" class="nav-link" data-scroll-target="#grammar"><span class="header-section-number">3.9</span> Grammar</a></li>
  </ul></li>
  <li><a href="#pg-json" id="toc-pg-json" class="nav-link" data-scroll-target="#pg-json"><span class="header-section-number">4</span> PG-JSON</a></li>
  <li><a href="#pg-jsonl" id="toc-pg-jsonl" class="nav-link" data-scroll-target="#pg-jsonl"><span class="header-section-number">5</span> PG-JSONL</a></li>
  <li><a href="#robustness-principle" id="toc-robustness-principle" class="nav-link" data-scroll-target="#robustness-principle"><span class="header-section-number">6</span> Robustness principle</a></li>
  <li><a href="#json-schemas" id="toc-json-schemas" class="nav-link" data-scroll-target="#json-schemas"><span class="header-section-number">7</span> JSON Schemas</a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references"><span class="header-section-number">8</span> References</a>
  <ul class="collapse">
  <li><a href="#normative-references" id="toc-normative-references" class="nav-link" data-scroll-target="#normative-references"><span class="header-section-number">8.1</span> Normative References</a></li>
  <li><a href="#informative-references" id="toc-informative-references" class="nav-link" data-scroll-target="#informative-references"><span class="header-section-number">8.2</span> Informative references</a></li>
  </ul></li>
  <li><a href="#changes" id="toc-changes" class="nav-link" data-scroll-target="#changes"><span class="header-section-number">9</span> Changes</a>
  <ul class="collapse">
  <li><a href="#version-1.0.0" id="toc-version-1.0.0" class="nav-link" data-scroll-target="#version-1.0.0"><span class="header-section-number">9.1</span> Version 1.0.0</a></li>
  <li><a href="#version-0.3" id="toc-version-0.3" class="nav-link" data-scroll-target="#version-0.3"><span class="header-section-number">9.2</span> Version 0.3</a></li>
  </ul></li>
  </ul>
</nav>
</div>
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
</div>
<main class="content quarto-banner-title-block" id="quarto-document-content">



  


<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p><em>THIS IS WORK IN PROGRESS. See also <a href="https://github.com/orgs/pg-format/discussions" class="uri">https://github.com/orgs/pg-format/discussions</a> and <a href="https://github.com/pg-format/pg-formatter/wiki" class="uri">https://github.com/pg-format/pg-formatter/wiki</a> for discussion and references! Issue tracker of this specification document is at <a href="https://github.com/pg-format/specification/issues" class="uri">https://github.com/pg-format/specification/issues</a>.</em></p>
</div>
</div>
<section id="introduction" class="level2" data-number="1">
<h2 data-number="1" class="anchored" data-anchor-id="introduction"><span class="header-section-number">1</span> Introduction</h2>
<section id="why-property-graphs" class="level3" data-number="1.1">
<h3 data-number="1.1" class="anchored" data-anchor-id="why-property-graphs"><span class="header-section-number">1.1</span> Why property graphs?</h3>
<p><strong>Property Graphs</strong> (also known as <strong>Labeled Property Graphs</strong>) are used as abstract data structure in graph databases and related applications.</p>
<p>Implementations of property graphs slightly differ in support of data types, restrictions on labels etc. The <a href="#data-model">definition of property graphs</a> used in this specification is aimed to be a superset of property graph models of common graph databases and formats. The model and its serializations have first been proposed by Hirokazu Chiba, Ryota Yamanaka, and Shota Matsumoto (<a href="https://arxiv.org/abs/1907.03936">2019</a>, <a href="https://arxiv.org/abs/2203.06393">2022</a>) and revised into this specification together with Jakob Voß.</p>
</section>
<section id="about-this-document" class="level3" data-number="1.2">
<h3 data-number="1.2" class="anchored" data-anchor-id="about-this-document"><span class="header-section-number">1.2</span> About this document</h3>
<p>The key words “MUST”, “MUST NOT”, “REQUIRED”, “SHOULD”, “SHOULD NOT”, “RECOMMENDED”, “NOT RECOMMENDED”, “MAY”, and “OPTIONAL” in this document are to be interpreted as described in BCP 14 (<a href="https://tools.ietf.org/html/rfc2119">RFC 2119</a> and <a href="https://tools.ietf.org/html/rfc8174">RFC 8174</a>) when, and only when, they appear in all capitals, as shown here.</p>
<p>Normative parts of this specification are limited to section <a href="#data-model">2</a> to <a href="#rubustness-priniciple">6</a> and <a href="#normative-references">the normative references</a>.</p>
</section>
</section>
<section id="data-model" class="level2" data-number="2">
<h2 data-number="2" class="anchored" data-anchor-id="data-model"><span class="header-section-number">2</span> Data Model</h2>
<p>A <strong>property graph</strong> consists of <strong>nodes</strong> and <strong>edges</strong> between these nodes. Each node has a unique <strong>node identifier</strong>. Each edge is either directed or undirected and can have an optional <strong>edge identifier</strong>. Each of the nodes and edges can have <strong>properties</strong> and <strong>labels</strong>. Properties are mappings from <strong>keys</strong> to non-empty lists of <strong>values</strong>. Node identifiers, labels, and keys are non-empty Unicode strings. A value is a Unicode string, a boolean value, or a number as defined by <a href="https://tools.ietf.org/html/rfc8259">RFC 8259</a>.</p>
<p>Extended graph features not being part of this data model include <em>graph attributes</em>, <em>hierarchies</em>, <em>hyper-edges</em> and <em>semantics</em> of individual labels and property keys.</p>
</section>
<section id="pg-format" class="level2" data-number="3">
<h2 data-number="3" class="anchored" data-anchor-id="pg-format"><span class="header-section-number">3</span> PG format</h2>
<p>A <strong>PG format</strong> document allows writing down a property graph in a compact textual form. A PG format document is a Unicode string that conforms to <a href="#grammar">grammar</a> and rules defined in this specification.</p>
<section id="basic-structure" class="level3" data-number="3.1">
<h3 data-number="3.1" class="anchored" data-anchor-id="basic-structure"><span class="header-section-number">3.1</span> Basic structure</h3>
<p>A PG format document encodes a property graph as Unicode string. The document MUST be encoded in UTF-8 (RFC 3629). Unicode codepoints can also be given by escape sequences in <a href="#quoted-strings">quoted strings</a>.</p>
<p>The document consists of a sequence of <strong>statements</strong>, each defining a <a href="#nodes">node</a> or an <a href="#edges">edge</a>, or being empty. Statements are separated from each other with a <a href="#whitespace">line break</a>. Optional <a href="#whitespace">spaces</a> and/or a <a href="#whitespace">comment</a> at the end of a statement are ignored.</p>
</section>
<section id="identifiers" class="level3" data-number="3.2">
<h3 data-number="3.2" class="anchored" data-anchor-id="identifiers"><span class="header-section-number">3.2</span> Identifiers</h3>
<p>An <strong>identifier</strong> is a string used to uniquely identify a <a href="#nodes">node</a>, an <a href="#edges">edge</a>, a <a href="#labels">label</a>, or the name of a <a href="#properties">property</a>. An identifiers can be given as <a href="#quoted-strings">quoted string</a> or as unquoted identifier.</p>
<p>An <strong>unquoted identifier</strong> is a non-empty string not including control codes <code>U+0000</code> to <code>U+0020</code> (tabulator, line breaks, space…), nor any of the characters “<code>&lt;</code>” (<code>U+003C</code>), “<code>&gt;</code>” (<code>U+003E</code>), ‘<code>"</code>’ (<code>U+0022</code>), “<code>{</code>” (<code>U+007B</code>), “<code>}</code>” (<code>U+007D</code>), “<code>|</code>” (<code>U+007C</code>), “<code>\</code>” (<code>U+005C</code>), “<code>^</code>” (<code>U+005E</code>), and “<code>`</code>” (<code>U+0060</code>).<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></p>
<div id="lst-identifiers" class="pg listing quarto-float">
<figure class="quarto-float quarto-float-lst figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-lst" id="lst-identifiers-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Example&nbsp;1: Several unquoted identifiers
</figcaption>
<div aria-describedby="lst-identifiers-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="sourceCode" id="lst-identifiers"><pre class="sourceCode pg"><code class="sourceCode pg"><span id="lst-identifiers-1"><a href="#lst-identifiers-1" aria-hidden="true" tabindex="-1"></a>abc</span>
<span id="lst-identifiers-2"><a href="#lst-identifiers-2" aria-hidden="true" tabindex="-1"></a>~2</span>
<span id="lst-identifiers-3"><a href="#lst-identifiers-3" aria-hidden="true" tabindex="-1"></a>木</span>
<span id="lst-identifiers-4"><a href="#lst-identifiers-4" aria-hidden="true" tabindex="-1"></a>dc:title</span>
<span id="lst-identifiers-5"><a href="#lst-identifiers-5" aria-hidden="true" tabindex="-1"></a>http://example.org/?a=-&amp;c=0#x</span>
<span id="lst-identifiers-6"><a href="#lst-identifiers-6" aria-hidden="true" tabindex="-1"></a>-':</span></code></pre></div>
</div>
</figure>
</div>
<p>An unquoted identifier MUST NOT start with a colon (<code>U+003A</code>) or comma (<code>U+002C</code>).</p>
<div id="lst-invalid-id" class="pg invalid listing quarto-float">
<figure class="quarto-float quarto-float-lst figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-lst" id="lst-invalid-id-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Example&nbsp;2: Invalid unquoted identifier
</figcaption>
<div aria-describedby="lst-invalid-id-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="sourceCode" id="lst-invalid-id"><pre class="sourceCode pg invalid"><code class="sourceCode pg"><span id="lst-invalid-id-1"><a href="#lst-invalid-id-1" aria-hidden="true" tabindex="-1"></a><span class="er">:</span>id</span></code></pre></div>
</div>
</figure>
</div>
<p>An unquoted identifier MUST NOT start with hash (“<code>#</code>”) because this starts a <a href="#whitespace">comment</a> nor with apostrophe (“<code>'</code>”) or quotation mark (“<code>"</code>”) because these start a <a href="#quoted-strings">quoted string</a>. Colon, hash, comman, and apostrophe are allowed in an unquoted identifier after its first character.</p>
</section>
<section id="nodes" class="level3" data-number="3.3">
<h3 data-number="3.3" class="anchored" data-anchor-id="nodes"><span class="header-section-number">3.3</span> Nodes</h3>
<p>A <strong>node</strong> consists of the following elements, given in this order and separated by <a href="#whitespace">delimiting whitespace</a>:</p>
<ul>
<li>A REQUIRED <a href="#identifiers">identifier</a></li>
<li>an OPTIONAL list of <a href="#labels">labels</a></li>
<li>an OPTIONAL list of <a href="#properties">properties</a></li>
</ul>
<div id="lst-nodes" class="pg listing quarto-float">
<figure class="quarto-float quarto-float-lst figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-lst" id="lst-nodes-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Example&nbsp;3: Some node statements
</figcaption>
<div aria-describedby="lst-nodes-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="sourceCode" id="lst-nodes"><pre class="sourceCode pg"><code class="sourceCode pg"><span id="lst-nodes-1"><a href="#lst-nodes-1" aria-hidden="true" tabindex="-1"></a>id <span class="dt">:label</span> <span class="fu">key:</span><span class="st">value</span></span>
<span id="lst-nodes-2"><a href="#lst-nodes-2" aria-hidden="true" tabindex="-1"></a>42 <span class="dt">:answer</span></span>
<span id="lst-nodes-3"><a href="#lst-nodes-3" aria-hidden="true" tabindex="-1"></a>"node id with spaces"</span></code></pre></div>
</div>
</figure>
</div>
<section id="node-merging" class="level4" data-number="3.3.1">
<h4 data-number="3.3.1" class="anchored" data-anchor-id="node-merging"><span class="header-section-number">3.3.1</span> Node merging</h4>
<p>A node can be defined with multiple statements having the same node identifier: a node is <strong>merged</strong> with an existing node by appending labels and property values.</p>
<div id="lst-node-merging-1" class="pg listing quarto-float">
<figure class="quarto-float quarto-float-lst figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-lst" id="lst-node-merging-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Example&nbsp;4: One node defined by multiple statements
</figcaption>
<div aria-describedby="lst-node-merging-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="sourceCode" id="lst-node-merging-1"><pre class="sourceCode pg"><code class="sourceCode pg"><span id="lst-node-merging-1-1"><a href="#lst-node-merging-1-1" aria-hidden="true" tabindex="-1"></a>a <span class="dt">:x</span> <span class="fu">k:</span><span class="dv">1</span> <span class="fu">m:</span><span class="kw">true</span></span>
<span id="lst-node-merging-1-2"><a href="#lst-node-merging-1-2" aria-hidden="true" tabindex="-1"></a>a <span class="dt">:y</span> <span class="fu">k:</span><span class="dv">2</span></span></code></pre></div>
</div>
</figure>
</div>
<div id="lst-node-merging-2" class="pg listing quarto-float">
<figure class="quarto-float quarto-float-lst figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-lst" id="lst-node-merging-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Example&nbsp;5: Same node defined by one statement
</figcaption>
<div aria-describedby="lst-node-merging-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="sourceCode" id="lst-node-merging-2"><pre class="sourceCode pg"><code class="sourceCode pg"><span id="lst-node-merging-2-1"><a href="#lst-node-merging-2-1" aria-hidden="true" tabindex="-1"></a>a <span class="dt">:x</span> <span class="dt">:y</span> <span class="fu">k:</span><span class="dv">1</span><span class="cf">,</span><span class="dv">2</span> <span class="fu">m:</span><span class="kw">true</span></span></code></pre></div>
</div>
</figure>
</div>
</section>
<section id="implicit-nodes" class="level4" data-number="3.3.2">
<h4 data-number="3.3.2" class="anchored" data-anchor-id="implicit-nodes"><span class="header-section-number">3.3.2</span> Implicit nodes</h4>
<p>Nodes can also be defined implicitly as part of an <a href="#edges">edge</a>: node identifiers referenced in edges imply the existence of nodes with these identifiers.</p>
<div id="lst-implicit-nodes" class="pg listing quarto-float">
<figure class="quarto-float quarto-float-lst figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-lst" id="lst-implicit-nodes-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Example&nbsp;6: Simple graph with two nodes and one edge
</figcaption>
<div aria-describedby="lst-implicit-nodes-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="sourceCode" id="lst-implicit-nodes"><pre class="sourceCode pg"><code class="sourceCode pg"><span id="lst-implicit-nodes-1"><a href="#lst-implicit-nodes-1" aria-hidden="true" tabindex="-1"></a>a <span class="cf">-&gt;</span> b</span></code></pre></div>
</div>
</figure>
</div>
<div id="lst-explicit-nodes" class="pg listing quarto-float">
<figure class="quarto-float quarto-float-lst figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-lst" id="lst-explicit-nodes-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Example&nbsp;7: Same graph with explicit node statements
</figcaption>
<div aria-describedby="lst-explicit-nodes-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="sourceCode" id="lst-explicit-nodes"><pre class="sourceCode pg"><code class="sourceCode pg"><span id="lst-explicit-nodes-1"><a href="#lst-explicit-nodes-1" aria-hidden="true" tabindex="-1"></a>a</span>
<span id="lst-explicit-nodes-2"><a href="#lst-explicit-nodes-2" aria-hidden="true" tabindex="-1"></a>b</span>
<span id="lst-explicit-nodes-3"><a href="#lst-explicit-nodes-3" aria-hidden="true" tabindex="-1"></a>a <span class="cf">-&gt;</span> b</span></code></pre></div>
</div>
</figure>
</div>
</section>
</section>
<section id="edges" class="level3" data-number="3.4">
<h3 data-number="3.4" class="anchored" data-anchor-id="edges"><span class="header-section-number">3.4</span> Edges</h3>
<p>A <strong>edge</strong> consists of the following elements, given in this order and separated by <a href="#whitespace">delimiting whitespace</a>:</p>
<ul>
<li>an OPTIONAL <strong><a href="#edge-identifiers">edge identifier</a></strong></li>
<li>a REQUIRED source node <a href="#identifiers">identifier</a></li>
<li>a REQUIRED <strong><a href="#edge-directions">direction</a></strong></li>
<li>a REQUIRED target node <a href="#identifiers">identifier</a></li>
<li>an OPTIONAL list of <a href="#labels">labels</a></li>
<li>an OPTIONAL list of <a href="#properties">properties</a></li>
</ul>
<div id="lst-edges" class="pg listing quarto-float">
<figure class="quarto-float quarto-float-lst figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-lst" id="lst-edges-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Example&nbsp;8: Some edge statements
</figcaption>
<div aria-describedby="lst-edges-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="sourceCode" id="lst-edges"><pre class="sourceCode pg"><code class="sourceCode pg"><span id="lst-edges-1"><a href="#lst-edges-1" aria-hidden="true" tabindex="-1"></a>a <span class="cf">-&gt;</span> b</span>
<span id="lst-edges-2"><a href="#lst-edges-2" aria-hidden="true" tabindex="-1"></a>a <span class="cf">--</span> b <span class="fu">key:</span><span class="st">value</span></span>
<span id="lst-edges-3"><a href="#lst-edges-3" aria-hidden="true" tabindex="-1"></a>1: a <span class="cf">-&gt;</span> b <span class="dt">:label</span> <span class="fu">key:</span><span class="st">value</span></span></code></pre></div>
</div>
</figure>
</div>
<p>The following statement does not define an edge but a <a href="#nodes">node</a> with identifier “<code>a--b</code>”:</p>
<div id="lst-no-edge-but-node" class="pg listing quarto-float">
<figure class="quarto-float quarto-float-lst figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-lst" id="lst-no-edge-but-node-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Example&nbsp;9: Not an edge statement
</figcaption>
<div aria-describedby="lst-no-edge-but-node-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="sourceCode" id="lst-no-edge-but-node"><pre class="sourceCode pg"><code class="sourceCode pg"><span id="lst-no-edge-but-node-1"><a href="#lst-no-edge-but-node-1" aria-hidden="true" tabindex="-1"></a>a--b</span></code></pre></div>
</div>
</figure>
</div>
<p>The following is not valid:</p>
<div id="lst-invalid-edge" class="pg invalid listing quarto-float">
<figure class="quarto-float quarto-float-lst figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-lst" id="lst-invalid-edge-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Example&nbsp;10: Invalid edge statement
</figcaption>
<div aria-describedby="lst-invalid-edge-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="sourceCode" id="lst-invalid-edge"><pre class="sourceCode pg invalid"><code class="sourceCode pg"><span id="lst-invalid-edge-1"><a href="#lst-invalid-edge-1" aria-hidden="true" tabindex="-1"></a>a-<span class="er">&gt;b</span></span></code></pre></div>
</div>
</figure>
</div>
<section id="edge-identifiers" class="level4" data-number="3.4.1">
<h4 data-number="3.4.1" class="anchored" data-anchor-id="edge-identifiers"><span class="header-section-number">3.4.1</span> Edge identifiers</h4>
<p>An edge identifier is an <a href="#identifiers">identifier</a> as first element of an edge statement, directly followed by a colon (<code>U+003A</code>).</p>
<div id="lst-multi-edges-with-id" class="pg listing quarto-float">
<figure class="quarto-float quarto-float-lst figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-lst" id="lst-multi-edges-with-id-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Example&nbsp;11: Graph with two equivalent edges, differentiated by edge identifiers
</figcaption>
<div aria-describedby="lst-multi-edges-with-id-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="sourceCode" id="lst-multi-edges-with-id"><pre class="sourceCode pg"><code class="sourceCode pg"><span id="lst-multi-edges-with-id-1"><a href="#lst-multi-edges-with-id-1" aria-hidden="true" tabindex="-1"></a>1: a <span class="cf">-&gt;</span> b <span class="dt">:follows</span> <span class="fu">since:</span><span class="dv">2024</span></span>
<span id="lst-multi-edges-with-id-2"><a href="#lst-multi-edges-with-id-2" aria-hidden="true" tabindex="-1"></a>"x": a <span class="cf">-&gt;</span> b <span class="dt">:follows</span> <span class="fu">since:</span><span class="dv">2024</span></span></code></pre></div>
</div>
</figure>
</div>
<p>Colons are not forbidden in edge identifiers:</p>
<div id="lst-colon-in-edge-id" class="pg listing quarto-float">
<figure class="quarto-float quarto-float-lst figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-lst" id="lst-colon-in-edge-id-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Example&nbsp;12: Edge identifiers with colon
</figcaption>
<div aria-describedby="lst-colon-in-edge-id-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="sourceCode" id="lst-colon-in-edge-id"><pre class="sourceCode pg"><code class="sourceCode pg"><span id="lst-colon-in-edge-id-1"><a href="#lst-colon-in-edge-id-1" aria-hidden="true" tabindex="-1"></a>x::  a <span class="cf">-&gt;</span> b  <span class="co"># edge identifier "x:"</span></span>
<span id="lst-colon-in-edge-id-2"><a href="#lst-colon-in-edge-id-2" aria-hidden="true" tabindex="-1"></a>":": a <span class="cf">-&gt;</span> b  <span class="co"># edge identifier ":"</span></span></code></pre></div>
</div>
</figure>
</div>
<p>Edge identifiers MUST NOT be repeated.</p>
<div id="lst-invalid-edge-ids" class="pg invalid listing quarto-float">
<figure class="quarto-float quarto-float-lst figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-lst" id="lst-invalid-edge-ids-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Example&nbsp;13: The second statement is invalid because of repeated edge identifier
</figcaption>
<div aria-describedby="lst-invalid-edge-ids-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="sourceCode" id="lst-invalid-edge-ids"><pre class="sourceCode pg invalid"><code class="sourceCode pg"><span id="lst-invalid-edge-ids-1"><a href="#lst-invalid-edge-ids-1" aria-hidden="true" tabindex="-1"></a>1: a <span class="cf">-&gt;</span> b <span class="dt">:follows</span></span>
<span id="lst-invalid-edge-ids-2"><a href="#lst-invalid-edge-ids-2" aria-hidden="true" tabindex="-1"></a>1: a <span class="cf">-&gt;</span> b <span class="fu">since:</span><span class="dv">2024</span></span></code></pre></div>
</div>
</figure>
</div>
<p>No space is allowed between edge identifier and its colon:</p>
<div id="lst-invalid-edge-id" class="pg invalid listing quarto-float">
<figure class="quarto-float quarto-float-lst figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-lst" id="lst-invalid-edge-id-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Example&nbsp;14: Invalid statement
</figcaption>
<div aria-describedby="lst-invalid-edge-id-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="sourceCode" id="lst-invalid-edge-id"><pre class="sourceCode pg invalid"><code class="sourceCode pg"><span id="lst-invalid-edge-id-1"><a href="#lst-invalid-edge-id-1" aria-hidden="true" tabindex="-1"></a>1 <span class="dt">: a</span> <span class="er">-&gt;</span> <span class="er">b</span></span></code></pre></div>
</div>
</figure>
</div>
</section>
<section id="edge-directions" class="level4" data-number="3.4.2">
<h4 data-number="3.4.2" class="anchored" data-anchor-id="edge-directions"><span class="header-section-number">3.4.2</span> Edge directions</h4>
<p>The direction element of an edge is either the character sequence <code>-&gt;</code> for a directed edge or the character sequence <code>--</code> for an undirected edge.</p>
</section>
<section id="loops" class="level4" data-number="3.4.3">
<h4 data-number="3.4.3" class="anchored" data-anchor-id="loops"><span class="header-section-number">3.4.3</span> Loops</h4>
<p>Edges can connect a node to itself.</p>
<div id="lst-lops" class="pg listing quarto-float">
<figure class="quarto-float quarto-float-lst figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-lst" id="lst-lops-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Example&nbsp;15: Directed and undirected loop
</figcaption>
<div aria-describedby="lst-lops-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="sourceCode" id="lst-lops"><pre class="sourceCode pg"><code class="sourceCode pg"><span id="lst-lops-1"><a href="#lst-lops-1" aria-hidden="true" tabindex="-1"></a>a <span class="cf">-&gt;</span> a</span>
<span id="lst-lops-2"><a href="#lst-lops-2" aria-hidden="true" tabindex="-1"></a>a <span class="cf">--</span> a</span></code></pre></div>
</div>
</figure>
</div>
</section>
<section id="multi-edges" class="level4" data-number="3.4.4">
<h4 data-number="3.4.4" class="anchored" data-anchor-id="multi-edges"><span class="header-section-number">3.4.4</span> Multi-edges</h4>
<p>The Property Graph Data Model allows for multiple edges between same nodes.</p>
<div id="lst-multi-edges" class="pg listing quarto-float">
<figure class="quarto-float quarto-float-lst figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-lst" id="lst-multi-edges-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Example&nbsp;16: Graph with two indistinguishable edges
</figcaption>
<div aria-describedby="lst-multi-edges-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="sourceCode" id="lst-multi-edges"><pre class="sourceCode pg"><code class="sourceCode pg"><span id="lst-multi-edges-1"><a href="#lst-multi-edges-1" aria-hidden="true" tabindex="-1"></a>a <span class="cf">-&gt;</span> b <span class="dt">:follows</span> <span class="fu">since:</span><span class="dv">2024</span></span>
<span id="lst-multi-edges-2"><a href="#lst-multi-edges-2" aria-hidden="true" tabindex="-1"></a>a <span class="cf">-&gt;</span> b <span class="dt">:follows</span> <span class="fu">since:</span><span class="dv">2024</span></span></code></pre></div>
</div>
</figure>
</div>
<p><a href="#edge-identifiers">Edge identifiers</a> can be used to identify and reference individual multi-edges.</p>
</section>
</section>
<section id="labels" class="level3" data-number="3.5">
<h3 data-number="3.5" class="anchored" data-anchor-id="labels"><span class="header-section-number">3.5</span> Labels</h3>
<p>A label is a an <a href="#identifiers">identifier</a> following a colon (<code>U+003A</code>). <a href="#whitespace">Spaces</a> between colon and label identifier are OPTIONAL but NOT RECOMMENDED.</p>
<p>Labels of a node or an edge are unique: repeated labels are ignored. Applications SHOULD preserve the order of labels of a node or an edge.</p>
<div id="lst-labels" class="pg listing quarto-float">
<figure class="quarto-float quarto-float-lst figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-lst" id="lst-labels-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Example&nbsp;17: Repeated labels on same node or edge are ignored
</figcaption>
<div aria-describedby="lst-labels-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="sourceCode" id="lst-labels"><pre class="sourceCode pg"><code class="sourceCode pg"><span id="lst-labels-1"><a href="#lst-labels-1" aria-hidden="true" tabindex="-1"></a>a <span class="dt">:label1</span> <span class="dt">:label2</span> <span class="dt">:label1</span>   <span class="co"># label1 is repeated</span></span>
<span id="lst-labels-2"><a href="#lst-labels-2" aria-hidden="true" tabindex="-1"></a>a <span class="dt">:label1</span> <span class="dt">:label2</span>           <span class="co"># equivalent statement</span></span>
<span id="lst-labels-3"><a href="#lst-labels-3" aria-hidden="true" tabindex="-1"></a>a <span class="dt">: label1</span> <span class="dt">: label2</span>         <span class="co"># equivalent statement</span></span></code></pre></div>
</div>
</figure>
</div>
<p>Colons are not forbidden in labels:</p>
<div id="lst-colon-in-labels" class="pg listing quarto-float">
<figure class="quarto-float quarto-float-lst figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-lst" id="lst-colon-in-labels-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Example&nbsp;18: Labels with colons
</figcaption>
<div aria-describedby="lst-colon-in-labels-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="sourceCode" id="lst-colon-in-labels"><pre class="sourceCode pg"><code class="sourceCode pg"><span id="lst-colon-in-labels-1"><a href="#lst-colon-in-labels-1" aria-hidden="true" tabindex="-1"></a>a <span class="dt">:b:c</span>                      <span class="co"># label "b:c"</span></span>
<span id="lst-colon-in-labels-2"><a href="#lst-colon-in-labels-2" aria-hidden="true" tabindex="-1"></a>a <span class="dt">:http://example.org/</span>      <span class="co"># label "http://example.org/"</span></span></code></pre></div>
</div>
</figure>
</div>
</section>
<section id="properties" class="level3" data-number="3.6">
<h3 data-number="3.6" class="anchored" data-anchor-id="properties"><span class="header-section-number">3.6</span> Properties</h3>
<p>A <strong>property</strong> consists of the following elements, given in this order:</p>
<ul>
<li>a REQUIRED <strong>property key</strong>, being an <a href="#identifiers">identifier</a></li>
<li>OPTIONAL <a href="#whitespace">spaces</a></li>
<li>a colon (<code>U+003A</code>)</li>
<li>a non-empty list of <strong><a href="#property-values">property values</a></strong>, separated by comma (<code>U+002C</code>)</li>
</ul>
<p>A property value MAY further be preceded and followed by <a href="#whitespace">delimiting whitespace</a>.</p>
<div id="lst-properties" class="pg listing quarto-float">
<figure class="quarto-float quarto-float-lst figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-lst" id="lst-properties-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Example&nbsp;19: Property with optional spaces and/or whitespace
</figcaption>
<div aria-describedby="lst-properties-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="sourceCode" id="lst-properties"><pre class="sourceCode pg"><code class="sourceCode pg"><span id="lst-properties-1"><a href="#lst-properties-1" aria-hidden="true" tabindex="-1"></a>a <span class="fu">key:</span> <span class="st">value</span>        <span class="co"># spaces before value</span></span>
<span id="lst-properties-2"><a href="#lst-properties-2" aria-hidden="true" tabindex="-1"></a>a <span class="fu">key:</span><span class="st">value</span>         <span class="co"># short form</span></span>
<span id="lst-properties-3"><a href="#lst-properties-3" aria-hidden="true" tabindex="-1"></a>a <span class="fu">"key":</span><span class="st">value</span>       <span class="co"># key can be quoted string</span></span>
<span id="lst-properties-4"><a href="#lst-properties-4" aria-hidden="true" tabindex="-1"></a>a <span class="er">key</span> <span class="er">:</span> <span class="er">value</span>       <span class="co"># optional spaces around colon</span></span>
<span id="lst-properties-5"><a href="#lst-properties-5" aria-hidden="true" tabindex="-1"></a>a <span class="er">key</span> <span class="er">:value</span>        <span class="co"># allowed but not recommended (value looks like label)</span></span>
<span id="lst-properties-6"><a href="#lst-properties-6" aria-hidden="true" tabindex="-1"></a>a <span class="fu">key:</span>              <span class="co"># delimiting whitespace between colon and value</span></span>
<span id="lst-properties-7"><a href="#lst-properties-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">value</span>             </span>
<span id="lst-properties-8"><a href="#lst-properties-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="lst-properties-9"><a href="#lst-properties-9" aria-hidden="true" tabindex="-1"></a>a <span class="fu">key:</span> <span class="dv">1</span><span class="cf">,</span><span class="dv">2</span>          <span class="co"># short form of a list</span></span>
<span id="lst-properties-10"><a href="#lst-properties-10" aria-hidden="true" tabindex="-1"></a>a <span class="fu">key:</span> <span class="dv">1</span>            <span class="co"># delimiting whitespace... </span></span>
<span id="lst-properties-11"><a href="#lst-properties-11" aria-hidden="true" tabindex="-1"></a>  <span class="cf">,</span>                 <span class="co"># ...after value 1 and before value 2</span></span>
<span id="lst-properties-12"><a href="#lst-properties-12" aria-hidden="true" tabindex="-1"></a>  <span class="dv">2</span></span></code></pre></div>
</div>
</figure>
</div>
<div id="lst-invalid-properties" class="pg invalid listing quarto-float">
<figure class="quarto-float quarto-float-lst figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-lst" id="lst-invalid-properties-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Example&nbsp;20: Invalid property
</figcaption>
<div aria-describedby="lst-invalid-properties-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="sourceCode" id="lst-invalid-properties"><pre class="sourceCode pg invalid"><code class="sourceCode pg"><span id="lst-invalid-properties-1"><a href="#lst-invalid-properties-1" aria-hidden="true" tabindex="-1"></a>a <span class="er">key</span>               <span class="co"># delimiting whitespace not allowed before colon</span></span>
<span id="lst-invalid-properties-2"><a href="#lst-invalid-properties-2" aria-hidden="true" tabindex="-1"></a>  <span class="er">:</span> <span class="er">value</span></span></code></pre></div>
</div>
</figure>
</div>
<section id="property-values" class="level4" data-number="3.6.1">
<h4 data-number="3.6.1" class="anchored" data-anchor-id="property-values"><span class="header-section-number">3.6.1</span> Property values</h4>
<p>A <strong>property value</strong> is one of</p>
<ul>
<li>a <strong>number value</strong>, given as defined in section 6 of <a href="https://tools.ietf.org/html/rfc8259">RFC 8259</a>. As mentioned there, implementations MAY set limits on the range and precision of numbers and double precision (IEEE754) is the most likely common limit.</li>
<li>a <strong>boolean value</strong>, given as one of the literal character sequences <code>true</code> and <code>false</code></li>
<li>a <strong>string value</strong>, given as one of
<ul>
<li>a <a href="#quoted-strings">quoted string</a></li>
<li>an <a href="#identifiers">unquoted identifier</a> not including a comma</li>
</ul></li>
</ul>
<p>The data type of a property value in PG format is either string, or number, or boolean.<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a> Applications MAY internally map these types to other type systems. Values of the same property are allowed to have different data types.</p>
<div id="lst-property-values" class="pg listing quarto-float">
<figure class="quarto-float quarto-float-lst figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-lst" id="lst-property-values-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Example&nbsp;21: Property values
</figcaption>
<div aria-describedby="lst-property-values-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="sourceCode" id="lst-property-values"><pre class="sourceCode pg"><code class="sourceCode pg"><span id="lst-property-values-1"><a href="#lst-property-values-1" aria-hidden="true" tabindex="-1"></a>x <span class="fu">n:</span> <span class="dv">1</span><span class="cf">,</span><span class="dv">-1</span><span class="cf">,</span><span class="dv">2e+3</span>          <span class="co"># numbers </span></span>
<span id="lst-property-values-2"><a href="#lst-property-values-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">b:</span> <span class="kw">true</span><span class="cf">,</span> <span class="kw">false</span>        <span class="co"># boolean values       </span></span>
<span id="lst-property-values-3"><a href="#lst-property-values-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">s:</span> <span class="st">hello</span><span class="cf">,</span><span class="st">"true"</span><span class="cf">,</span><span class="st">""</span>    <span class="co"># strings</span></span></code></pre></div>
</div>
</figure>
</div>
</section>
<section id="property-merging" class="level4" data-number="3.6.2">
<h4 data-number="3.6.2" class="anchored" data-anchor-id="property-merging"><span class="header-section-number">3.6.2</span> Property merging</h4>
<p>Value lists of properties of the same property key are concatenated. Value lists are no sets: the same value can be included multiple times.</p>
<div id="lst-property-values" class="pg listing quarto-float">
<figure class="quarto-float quarto-float-lst figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-lst" id="lst-property-values-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Example&nbsp;22: Three nodes with same properties
</figcaption>
<div aria-describedby="lst-property-values-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="sourceCode" id="lst-property-values"><pre class="sourceCode pg"><code class="sourceCode pg"><span id="lst-property-values-1"><a href="#lst-property-values-1" aria-hidden="true" tabindex="-1"></a>a <span class="fu">x:</span><span class="dv">1</span><span class="cf">,</span><span class="dv">2</span><span class="cf">,</span><span class="dv">3</span>       <span class="co"># property values given as list</span></span>
<span id="lst-property-values-2"><a href="#lst-property-values-2" aria-hidden="true" tabindex="-1"></a>b <span class="fu">x:</span><span class="dv">1</span> <span class="fu">x:</span><span class="dv">2</span><span class="cf">,</span><span class="dv">3</span>     <span class="co"># property values given as two lists</span></span>
<span id="lst-property-values-3"><a href="#lst-property-values-3" aria-hidden="true" tabindex="-1"></a>c <span class="fu">x:</span><span class="dv">1</span>           <span class="co"># property values given...</span></span>
<span id="lst-property-values-4"><a href="#lst-property-values-4" aria-hidden="true" tabindex="-1"></a>c <span class="fu">x:</span><span class="dv">2</span> <span class="fu">x:</span><span class="dv">3</span>       <span class="co"># ...in two node statements</span></span></code></pre></div>
</div>
</figure>
</div>
</section>
</section>
<section id="quoted-strings" class="level3" data-number="3.7">
<h3 data-number="3.7" class="anchored" data-anchor-id="quoted-strings"><span class="header-section-number">3.7</span> Quoted Strings</h3>
<p>A quoted string starts with an apostrophe (“<code>'</code>”) or quotation mark (“<code>"</code>”) and ends with the same character. In between all Unicode characters are allowed, except for the characters that MUST be escaped:</p>
<ul>
<li>apostrophe, when the string is quoted with apostrophe</li>
<li>quotation mark, when the string is quoted with quotation mark</li>
<li>reverse solidus (<code>\</code> <code>U+005C</code>)</li>
<li>control characters <code>U+0000</code> through <code>U+001F</code> except line feed (<code>U+000A</code>), carriage return (<code>U+000D</code>), and tabular (<code>U+0009</code>)</li>
</ul>
<p>All characters can be escaped as defined by JSON specification (<a href="https://tools.ietf.org/html/rfc8259">RFC 8259</a>, section 7) with the addition of the two-character escape sequence <code>\'</code> to escape an apostrophe. Quoted strings in PG format further differ from JSON by string quoting with apostrophe in addition to quotation mark and by allowing unquoted line feed, carriage return, and tabular.</p>
<div id="lst-strings" class="pg listing quarto-float">
<figure class="quarto-float quarto-float-lst figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-lst" id="lst-strings-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Example&nbsp;23: The same string given in multiple quoted forms
</figcaption>
<div aria-describedby="lst-strings-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="sourceCode" id="lst-strings"><pre class="sourceCode pg"><code class="sourceCode pg"><span id="lst-strings-1"><a href="#lst-strings-1" aria-hidden="true" tabindex="-1"></a>"hello,<span class="sc">\n</span>world"</span>
<span id="lst-strings-2"><a href="#lst-strings-2" aria-hidden="true" tabindex="-1"></a>'hello,<span class="sc">\u000A</span>world'</span>
<span id="lst-strings-3"><a href="#lst-strings-3" aria-hidden="true" tabindex="-1"></a>"hello,</span>
<span id="lst-strings-4"><a href="#lst-strings-4" aria-hidden="true" tabindex="-1"></a>world"</span></code></pre></div>
</div>
</figure>
</div>
<div id="lst-invalid-string-escapes" class="pg invalid listing quarto-float">
<figure class="quarto-float quarto-float-lst figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-lst" id="lst-invalid-string-escapes-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Example&nbsp;24: Invalid string escape sequences
</figcaption>
<div aria-describedby="lst-invalid-string-escapes-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="sourceCode" id="lst-invalid-string-escapes"><pre class="sourceCode pg invalid"><code class="sourceCode pg"><span id="lst-invalid-string-escapes-1"><a href="#lst-invalid-string-escapes-1" aria-hidden="true" tabindex="-1"></a>"h<span class="er">\e</span>llo<span class="er">\u21</span>"</span></code></pre></div>
</div>
</figure>
</div>
</section>
<section id="whitespace" class="level3" data-number="3.8">
<h3 data-number="3.8" class="anchored" data-anchor-id="whitespace"><span class="header-section-number">3.8</span> Whitespace</h3>
<p>A <strong>line break</strong> is either a line feed (<code>U+000A</code>) or a carriage return (<code>U+000D</code>) optionally followed by a line feed.</p>
<p><strong>Spaces</strong> are a non-empty sequence of space (<code>U+0020</code>) and/or tabular (<code>U+0009</code>).</p>
<p>A <strong>comment</strong> begins with a hash (<code>#</code> = <code>U+0023</code>) and it ends before the next <a href="#whitespace">line break</a> or at the end of the document.</p>
<p><strong>Delimiting whitespace</strong> separates elements of a statement. Delimiting whitespace consists of an optional sequence of <a href="#whitespace">spaces</a>, <a href="#whitespace">comment</a>, and/or <a href="#whitespace">line breaks</a> and it ends with <a href="#whitespace">spaces</a>. The inclusion of line breaks in delimiting whitespace is also called <em>line folding</em>.</p>
<div id="lst-line-folding" class="pg listing quarto-float">
<figure class="quarto-float quarto-float-lst figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-lst" id="lst-line-folding-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Example&nbsp;25: Line folding
</figcaption>
<div aria-describedby="lst-line-folding-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="sourceCode" id="lst-line-folding"><pre class="sourceCode pg"><code class="sourceCode pg"><span id="lst-line-folding-1"><a href="#lst-line-folding-1" aria-hidden="true" tabindex="-1"></a>a <span class="dt">:x</span>  <span class="co"># node id and label</span></span>
<span id="lst-line-folding-2"><a href="#lst-line-folding-2" aria-hidden="true" tabindex="-1"></a><span class="co">  # this and the following line are empty </span></span>
<span id="lst-line-folding-3"><a href="#lst-line-folding-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="lst-line-folding-4"><a href="#lst-line-folding-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">:y</span>  <span class="co"># another label of the same node at continuation line</span></span></code></pre></div>
</div>
</figure>
</div>
<div id="lst-line-folding" class="pg listing quarto-float">
<figure class="quarto-float quarto-float-lst figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-lst" id="lst-line-folding-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Example&nbsp;26: Same graph as above
</figcaption>
<div aria-describedby="lst-line-folding-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="sourceCode" id="lst-line-folding"><pre class="sourceCode pg"><code class="sourceCode pg"><span id="lst-line-folding-1"><a href="#lst-line-folding-1" aria-hidden="true" tabindex="-1"></a>a <span class="dt">:x</span> <span class="dt">:y</span></span></code></pre></div>
</div>
</figure>
</div>
</section>
<section id="grammar" class="level3" data-number="3.9">
<h3 data-number="3.9" class="anchored" data-anchor-id="grammar"><span class="header-section-number">3.9</span> Grammar</h3>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p><em>A formal grammar of PG format will be provided</em></p>
</div>
</div>
</section>
</section>
<section id="pg-json" class="level2" data-number="4">
<h2 data-number="4" class="anchored" data-anchor-id="pg-json"><span class="header-section-number">4</span> PG-JSON</h2>
<p>A <strong>PG-JSON</strong> document serializes a property graph in JSON. A PG-JSON document is a JSON document (<a href="https://tools.ietf.org/html/rfc8259">RFC 8259</a>) with a JSON object with exactely two fields:</p>
<ul>
<li><code>nodes</code> an array of nodes</li>
<li><code>edges</code> an array of edges</li>
</ul>
<p>Each node is a JSON object with exactely three fields:</p>
<ul>
<li><code>id</code> the node identifier, being a non-empty string. Node identifiers MUST be unique per PG-JSON document.</li>
<li><code>labels</code> an array of labels, each being a non-empty string. Labels MUST be unique per node.</li>
<li><code>properties</code> a JSON object mapping non-empty strings as property keys to non-empty arrays of scalar JSON values (string, number, boolean) as property values.</li>
</ul>
<p>Each edge is a JSON object with one optional and four mandatory fields:</p>
<ul>
<li><code>id</code> (optional) the edge identifier, being a non-empty string. Edge identifiers MUST be unique per PG-JSON document.</li>
<li><code>undirected</code> (optional) a boolean value whether the edge is undirected</li>
<li><code>from</code> an identifier of the source node from <code>nodes</code> array</li>
<li><code>to</code> an identifier of the target node from <code>nodes</code> array</li>
<li><code>labels</code> and <code>properties</code> as defined above at nodes</li>
</ul>
</section>
<section id="pg-jsonl" class="level2" data-number="5">
<h2 data-number="5" class="anchored" data-anchor-id="pg-jsonl"><span class="header-section-number">5</span> PG-JSONL</h2>
<p>A <strong>PG-JSONL</strong> document or stream serializes a property graph in JSON Lines format, also known as newline-delimited JSON. A PG-JSONL document is a sequence of JSON objects, separated by line separator (<code>U+000A</code>) and optional whitespace (<code>U+0020</code>, <code>U+0009</code>, and <code>U+000D</code>) around JSON objects, and an optional line separator at the end. Each object is</p>
<ul>
<li>either a node with field <code>type</code> having string value <code>"node"</code> and the same mandatory node fields from PG-JSON format,</li>
<li>or an edge with field <code>type</code> having string value <code>"edge"</code> and the same mandatory edge fields from PG-JSON format.</li>
</ul>
<p>Node objects SHOULD be given before their node identifiers are referenced in an edge object but applications MAY also create implicit node objects for this cases. Applications MAY allow multiple node objects with same node identifier in PG-JSONL but they MUST make clear whether nodes with repeated identifier are ignored, merged into existing nodes, or replace existing nodes.</p>
</section>
<section id="robustness-principle" class="level2" data-number="6">
<h2 data-number="6" class="anchored" data-anchor-id="robustness-principle"><span class="header-section-number">6</span> Robustness principle</h2>
<p>Applications MAY automatically convert documents not fully conforming to the specification of PG-JSON and/or PG-JSONL to valid form, for instance by:</p>
<ul>
<li>creation of implicit nodes for node identifiers referenced in edges</li>
<li>addition of missing empty fields <code>labels</code> and/or <code>properties</code></li>
<li>removal or mapping of invalid property values such as <code>null</code> and JSON objects</li>
<li>mapping of numeric node identifiers and edge identifiers to strings</li>
<li>removal of additional fields not defined in this specification</li>
</ul>
</section>
<section id="json-schemas" class="level2" data-number="7">
<h2 data-number="7" class="anchored" data-anchor-id="json-schemas"><span class="header-section-number">7</span> JSON Schemas</h2>
<p>The <a href="#pg-json">PG-JSON format</a> can be validated with a non-normative JSON Schema file <a href="schema/pg-json.json"><code>pg-json.json</code></a> in this repository. Rules not covered by the JSON schema include:</p>
<ul>
<li>nodes referenced in edges must be defined (no implicit nodes)</li>
<li>node identifiers must be unique per graph</li>
<li>edge identifiers must be unique per graph</li>
</ul>
<p>The <a href="#pg-jsonl">PG-JSONL format</a> can be validated with a non-normative JSON Schema file <a href="schema/pg-jsonl.json"><code>pg-jsonl.json</code></a> in this repository. Validation is limited in the same way as validation of PG-JSON with its JSON Schema.</p>
</section>
<section id="references" class="level2" data-number="8">
<h2 data-number="8" class="anchored" data-anchor-id="references"><span class="header-section-number">8</span> References</h2>
<section id="normative-references" class="level3" data-number="8.1">
<h3 data-number="8.1" class="anchored" data-anchor-id="normative-references"><span class="header-section-number">8.1</span> Normative References</h3>
<ul>
<li><p>Bradner, S.: Key words for use in RFCs to Indicate Requirement Levels. BCP 14, RFC 2119, March 1997, <a href="http://www.rfc-editor.org/info/rfc2119" class="uri">http://www.rfc-editor.org/info/rfc2119</a>.</p></li>
<li><p>Bray, T.: The JavaScript Object Notation (JSON) Data Interchange Format. RFC 8259, December 2017. <a href="https://tools.ietf.org/html/rfc8259" class="uri">https://tools.ietf.org/html/rfc8259</a></p></li>
<li><p>Leiba, B.: Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words. BCP 14, RFC 8174, May 2017, <a href="http://www.rfc-editor.org/info/rfc8174" class="uri">http://www.rfc-editor.org/info/rfc8174</a>.</p></li>
<li><p>The Unicode Consortium: The Unicode Standard. <a href="http://www.unicode.org/versions/latest/" class="uri">http://www.unicode.org/versions/latest/</a></p></li>
<li><p>Yergeau, F.: UTF-8, a transformation format of ISO 10646. RFC 3629, November 2003. <a href="https://tools.ietf.org/html/rfc3629" class="uri">https://tools.ietf.org/html/rfc3629</a></p></li>
</ul>
</section>
<section id="informative-references" class="level3" data-number="8.2">
<h3 data-number="8.2" class="anchored" data-anchor-id="informative-references"><span class="header-section-number">8.2</span> Informative references</h3>
<ul>
<li><p><a href="https://json-schema.org/">JSON Schema</a> schema language</p></li>
<li><p><a href="https://doi.org/10.1109/IEEESTD.2019.8766229">IEEE Standard for Floating-Point Arithmetic</a></p></li>
<li><p>Chiba, H., Yamanaka, R., Matsumoto, S.: <a href="http://arxiv.org/abs/1907.03936">Property Graph Exchange Format</a>. 2019</p></li>
</ul>
</section>
</section>
<section id="changes" class="level2" data-number="9">
<h2 data-number="9" class="anchored" data-anchor-id="changes"><span class="header-section-number">9</span> Changes</h2>
<section id="version-1.0.0" class="level3" data-number="9.1">
<h3 data-number="9.1" class="anchored" data-anchor-id="version-1.0.0"><span class="header-section-number">9.1</span> Version 1.0.0</h3>
<p><em>not published yet</em></p>
<p>Introduced comments, line folding, edge identifiers. Aligned property values with JSON syntax. Added more formal rules for quoted strings and unquoted identifiers. Added PG-JSONL. Changed node identifiers to be strings.</p>
</section>
<section id="version-0.3" class="level3" data-number="9.2">
<h3 data-number="9.2" class="anchored" data-anchor-id="version-0.3"><span class="header-section-number">9.2</span> Version 0.3</h3>
<p>Less formal specification published in 2019. See <a href="https://pg-format.readthedocs.io/en/0.3/contents/pg-format.html">latest version from 2020</a>.</p>
</section>
</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>This definition is equivalent to the definition of IRI references <a href="https://www.w3.org/TR/sparql11-query/#rIRIREF">in SPARQL</a> and <a href="https://www.w3.org/TR/turtle/#grammar-production-IRIREF">in Turtle</a> excluding empty strings and escape sequences. Forbidden characters are reserved for extensions of PG format.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>This is identical to scalar JSON values (string, number, boolean) and every serialized JSON scalar is a valid property value in PG format.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>